{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [],
   "source": [
    "import numpy as np\n",
    "import pandas as pd\n",
    "import seaborn as sns\n",
    "import matplotlib as mpl\n",
    "import matplotlib.pyplot as plt"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# 데이터 전처리"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [],
   "source": [
    "data=pd.read_csv('C:/Users/Han/Desktop/dummy.csv')\n",
    "data=data.drop('Unnamed: 0',axis=1)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Y 변수 scaling \n",
    "from sklearn.preprocessing import StandardScaler\n",
    "scaler = StandardScaler()\n",
    "DATA =pd.read_csv('C:/Users/Han/Desktop/DATA.csv')\n",
    "y=DATA[['Q4B']]\n",
    "y=scaler.fit_transform(y)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [],
   "source": [
    "# X 변수 category화 (dummy 이므로 ordinal 을 주지 않아도 된다.)\n",
    "X=data\n",
    "col=X.select_dtypes(include=[np.int64]).columns\n",
    "X[col] = X[col].astype('category')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {},
   "outputs": [],
   "source": [
    "from sklearn.model_selection import train_test_split\n",
    "X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.8, random_state=0)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# DecisionTree Regression"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [],
   "source": [
    "from sklearn.tree import DecisionTreeRegressor"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {},
   "outputs": [],
   "source": [
    "#DecisionTreeRegressor()\n",
    "# criterion : 불순성의 기준을 뭐로 할지 'gini'(defalut) / 'entropy'\n",
    "# 다음의 parameterm 들으 overfitting 을 해결해준다.\n",
    "# max_depth : 트리의 최대 깊이. \n",
    "#           : (defalut) full tree 가 될때까지 확장.\n",
    "#           : 이를 이용해 사전 가지치기를 하고/ overfitting 을 해결할 수 있다.\n",
    "# min_samples_split : 노드에서 가지 분리할 떄 필요한 최소 sample 갯수에 제한을 준다.\n",
    "#                   : (default) = 2 \n",
    "# min_samples_leaf : leaf 에서 가져야 할 최소 sample \n",
    "#                  : (default) = 1\n",
    "# max_features : Decision tree 를 만들때 사용할 수 있는 변수의 갯수 제한\n",
    "#              : (default) = 총 변수 갯수 사용"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 31,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "DecisionTreeRegressor(criterion='mse', max_depth=7, max_features=None,\n",
       "                      max_leaf_nodes=None, min_impurity_decrease=0.0,\n",
       "                      min_impurity_split=None, min_samples_leaf=1,\n",
       "                      min_samples_split=100, min_weight_fraction_leaf=0.0,\n",
       "                      presort=False, random_state=None, splitter='best')"
      ]
     },
     "execution_count": 31,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "model = DecisionTreeRegressor(max_depth=7,min_samples_split=100)\n",
    "model.fit(X_train, y_train)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## 모델 성능평가"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 32,
   "metadata": {},
   "outputs": [],
   "source": [
    "from sklearn import metrics"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 33,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MSE : 0.7774763230983701\n",
      "R squared : 0.21256402111514106\n"
     ]
    }
   ],
   "source": [
    "y_pred = model.predict(X_test)\n",
    "print (\"MSE :\", metrics.mean_squared_error(y_test, y_pred))\n",
    "print(\"R squared :\", metrics.r2_score(y_test, y_pred))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Feature Importance"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "<matplotlib.axes._subplots.AxesSubplot at 0x1a1d43525f8>"
      ]
     },
     "execution_count": 12,
     "metadata": {},
     "output_type": "execute_result"
    },
    {
     "data": {
      "image/png": "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2a71zZjVSRMREdGmMkY4pwCrbe8AkHTdGOW3Ai+0va1IVtdKmmf70SZlXw78yPbDRdurgKO6GHtERJSkrEkDLa9bbftJ29uK94PAvYyeRKb2mtgREZNUGQnnZmCRpOmSDgQWjlZY0mxJfcX7I4C5wKa9FL8NeLWkgyXtD7y1i3FHRESJun5Jzfba4lLXOuA+4BYASYuALwGzgTWS1tk+HTgV+KSkncAu4ELbv91L21slLQd+Rv1S3FpgOFmdCKwGDgIWSrrU9ryx4j32sFkM5IkBERGlk13uFaoiQTw2PEttoqnVah4YGOh1GBERk4akQdu1sUvuKU8aiIiISpT+i5+2l3dST9JtwLQRm8+3PTTuoCIionIT9mnRtl/e6xgiIqJ7ckktIiIqkYQTERGVSMKJiIhKJOFEREQlknAiIqISSTgREVGJCTstuipDW7bTv3RN19vdnMflRETsISOciIioRBJORERUorKEI2mXpHWS1ku6Q9JHJD2j2PdqSduL/cOv10l6gaSbJG0o6n1wjGN8RtIvJd0pabWk51RzdhERMZYqRzi/t318sWTAacAbgU807L+l2D/8+gGwE/io7ZcCrwAukjTastI3AMfYPg64B1hWzqlERES7enJJzfZDwBLgA5I0SrmtttcW738HbAAOG6X8923vLD7eCszpXtQRETEePbuHY3tTcfznFZtOGXFJ7d80lpfUD8ynvupnK94NfK/ZDklLJA1IGti1Y3tH8UdERHt6PS26cXRzi+03NS0kPRv4NvAh24+O2ah0CfXLcVc12297JbASYNqhc8tdgS4iIoAejnAkHUF9SemHxii3P/Vkc5Xta1po9wLgTcDbXfZyphER0bKejHAkzQauBFbY9t5u4xT3d74KbLD9+RbaPQP4GPBHtnd0MeSIiBinKhPOdEnrgP2pX+76BtCYRE4p9g/7FPCPwPnAUMO+P7X93b0cYwX1VUJvKJLYrbYv7OI5REREhzTVrzrVajUPDAz0OoyIiElD0qDtWrv18qSBiIioRK9nqXVE0l8Crxyx+S9sf70X8URExNgmZcKxfVGvY4iIiPbkklpERFQiCSciIiqRhBMREZVIwomIiEok4URERCWScCIiohJJOBERUYlJ+Xs43TS0ZTv9S9eUeozNl59ZavsREZNBRjgREVGJniYcSXMkfUfSRkmbJK2QNK1h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\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    }
   ],
   "source": [
    "feat_importances = pd.Series(model.feature_importances_, index=X.columns)\n",
    "feat_importances.nlargest(10).plot(kind='barh')"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Lasso regression"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 50,
   "metadata": {},
   "outputs": [],
   "source": [
    "from sklearn.linear_model import LassoCV\n",
    "from sklearn.linear_model import Lasso"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Hyperparameter 설정"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 61,
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "C:\\Users\\Han\\Anaconda3\\lib\\site-packages\\sklearn\\linear_model\\coordinate_descent.py:1100: DataConversionWarning: A column-vector y was passed when a 1d array was expected. Please change the shape of y to (n_samples, ), for example using ravel().\n",
      "  y = column_or_1d(y, warn=True)\n",
      "C:\\Users\\Han\\Anaconda3\\lib\\site-packages\\sklearn\\linear_model\\coordinate_descent.py:471: ConvergenceWarning: Objective did not converge. You might want to increase the number of iterations. Duality gap: 0.8665777534715744, tolerance: 0.5260560581072566\n",
      "  tol, rng, random, positive)\n",
      "C:\\Users\\Han\\Anaconda3\\lib\\site-packages\\sklearn\\linear_model\\coordinate_descent.py:471: ConvergenceWarning: Objective did not converge. You might want to increase the number of iterations. Duality gap: 1.0330270763161025, tolerance: 0.5260560581072566\n",
      "  tol, rng, random, positive)\n",
      "C:\\Users\\Han\\Anaconda3\\lib\\site-packages\\sklearn\\linear_model\\coordinate_descent.py:471: ConvergenceWarning: Objective did not converge. You might want to increase the number of iterations. Duality gap: 1.0491027198413576, tolerance: 0.5260560581072566\n",
      "  tol, rng, random, positive)\n",
      "C:\\Users\\Han\\Anaconda3\\lib\\site-packages\\sklearn\\linear_model\\coordinate_descent.py:471: ConvergenceWarning: Objective did not converge. You might want to increase the number of iterations. Duality gap: 1.0449664755856247, tolerance: 0.5260560581072566\n",
      "  tol, rng, random, positive)\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "LassoCV(alphas=array([1.00000000e-04, 1.06354496e-04, 1.13112788e-04, 1.20300535e-04,\n",
       "       1.27945027e-04, 1.36075289e-04, 1.44722187e-04, 1.53918552e-04,\n",
       "       1.63699300e-04, 1.74101565e-04, 1.85164842e-04, 1.96931134e-04,\n",
       "       2.09445114e-04, 2.22754295e-04, 2.36909207e-04, 2.51963593e-04,\n",
       "       2.67974609e-04, 2.85003044e-04, 3.03113550e-04, 3.22374888e-04,\n",
       "       3.42860186e-04, 3.64647222e-0...\n",
       "       5.07791724e+03, 5.40059328e+03, 5.74377375e+03, 6.10876161e+03,\n",
       "       6.49694260e+03, 6.90979055e+03, 7.34887289e+03, 7.81585671e+03,\n",
       "       8.31251499e+03, 8.84073340e+03, 9.40251743e+03, 1.00000000e+04]),\n",
       "        copy_X=True, cv=5, eps=0.001, fit_intercept=True, max_iter=1000,\n",
       "        n_alphas=100, n_jobs=None, normalize=False, positive=False,\n",
       "        precompute='auto', random_state=None, selection='cyclic', tol=0.0001,\n",
       "        verbose=False)"
      ]
     },
     "execution_count": 61,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "alphas = np.logspace(-4, 4, num=300) # 10^-4 ~ 10^4 \n",
    "lassocv = LassoCV(alphas = alphas, cv=5)\n",
    "lassocv.fit(X_train,y_train) ;"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 62,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "0.0031501247957553278"
      ]
     },
     "execution_count": 62,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# 최적의 alpha = 0.003150\n",
    "lassocv.alpha_"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## model fitting"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 66,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "Lasso(alpha=0.00315, copy_X=True, fit_intercept=True, max_iter=1000,\n",
       "      normalize=False, positive=False, precompute=False, random_state=None,\n",
       "      selection='cyclic', tol=0.0001, warm_start=False)"
      ]
     },
     "execution_count": 66,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "model = Lasso(alpha = 0.003150)\n",
    "model.fit(X_train,y_train)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## 모델 성능평가"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 67,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MSE : 0.6844895462342775\n",
      "R_squared : 0.3067419806078835\n"
     ]
    }
   ],
   "source": [
    "predicted = model.predict(X_test) \n",
    "\n",
    "print (\"MSE :\", metrics.mean_squared_error(y_test, predicted))\n",
    "print('R_squared :',model.score(X_test, y_test)) # C-V 로 찾은 최적의 ridge 로 계산한 R^2"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    " ## Feature Importance"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 72,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "Text(0.5, 1.0, 'Coefficients in the Model')"
      ]
     },
     "execution_count": 72,
     "metadata": {},
     "output_type": "execute_result"
    },
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    }
   ],
   "source": [
    "coef = pd.Series(model.coef_, index = X_train.columns).sort_values()\n",
    "imp_coef = pd.concat([coef.head(10), coef.tail(10)])\n",
    "imp_coef.plot(kind = \"barh\")\n",
    "plt.title(\"Coefficients in the Model\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# RandomForeset Regression"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 76,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "C:\\Users\\Han\\Anaconda3\\lib\\site-packages\\ipykernel_launcher.py:4: DataConversionWarning: A column-vector y was passed when a 1d array was expected. Please change the shape of y to (n_samples,), for example using ravel().\n",
      "  after removing the cwd from sys.path.\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "RandomForestRegressor(bootstrap=True, criterion='mse', max_depth=None,\n",
       "                      max_features='auto', max_leaf_nodes=16,\n",
       "                      min_impurity_decrease=0.0, min_impurity_split=None,\n",
       "                      min_samples_leaf=1, min_samples_split=2,\n",
       "                      min_weight_fraction_leaf=0.0, n_estimators=10,\n",
       "                      n_jobs=None, oob_score=False, random_state=42, verbose=0,\n",
       "                      warm_start=False)"
      ]
     },
     "execution_count": 76,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "from sklearn.ensemble import RandomForestRegressor\n",
    "\n",
    "model = RandomForestRegressor(n_estimators=10, max_leaf_nodes=16, random_state=42)\n",
    "model.fit(X_train, y_train)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## 모델 성능평가"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 81,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MSE : 0.738471306178806\n",
      "R_squared : 0.25206870153688987\n"
     ]
    }
   ],
   "source": [
    "y_pred = model.predict(X_test)\n",
    "print (\"MSE :\", metrics.mean_squared_error(y_test, y_pred))\n",
    "print('R_squared :',model.score(X_test, y_test)) "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Feature Importance"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 80,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "<matplotlib.axes._subplots.AxesSubplot at 0x1a1dae55198>"
      ]
     },
     "execution_count": 80,
     "metadata": {},
     "output_type": "execute_result"
    },
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    }
   ],
   "source": [
    "feat_importances = pd.Series(model.feature_importances_, index=X.columns)\n",
    "feat_importances.nlargest(10).plot(kind='barh')"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Gradient Boosting resgressoion"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 85,
   "metadata": {
    "scrolled": false
   },
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "C:\\Users\\Han\\Anaconda3\\lib\\site-packages\\sklearn\\ensemble\\gradient_boosting.py:1450: DataConversionWarning: A column-vector y was passed when a 1d array was expected. Please change the shape of y to (n_samples, ), for example using ravel().\n",
      "  y = column_or_1d(y, warn=True)\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "GradientBoostingRegressor(alpha=0.9, criterion='friedman_mse', init=None,\n",
       "                          learning_rate=1.0, loss='ls', max_depth=3,\n",
       "                          max_features=None, max_leaf_nodes=None,\n",
       "                          min_impurity_decrease=0.0, min_impurity_split=None,\n",
       "                          min_samples_leaf=1, min_samples_split=2,\n",
       "                          min_weight_fraction_leaf=0.0, n_estimators=10,\n",
       "                          n_iter_no_change=None, presort='auto',\n",
       "                          random_state=42, subsample=1.0, tol=0.0001,\n",
       "                          validation_fraction=0.1, verbose=0, warm_start=False)"
      ]
     },
     "execution_count": 85,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "from sklearn.ensemble import GradientBoostingRegressor\n",
    "model = GradientBoostingRegressor(n_estimators=10, learning_rate=1.0, random_state=42)\n",
    "model.fit(X_train, y_train)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## 모델 성능평가"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 86,
   "metadata": {
    "scrolled": false
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MSE : 0.7387107423492368\n",
      "R_squared : 0.25182619813242313\n"
     ]
    }
   ],
   "source": [
    "y_pred = model.predict(X_test)\n",
    "print (\"MSE :\", metrics.mean_squared_error(y_test, y_pred))\n",
    "print('R_squared :',model.score(X_test, y_test)) "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Feature Importance"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 88,
   "metadata": {
    "scrolled": false
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "<matplotlib.axes._subplots.AxesSubplot at 0x1a1daa48978>"
      ]
     },
     "execution_count": 88,
     "metadata": {},
     "output_type": "execute_result"
    },
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    }
   ],
   "source": [
    "feat_importances = pd.Series(model.feature_importances_, index=X.columns)\n",
    "feat_importances.nlargest(10).plot(kind='barh')"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# AdaBoost Regression"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 92,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "C:\\Users\\Han\\Anaconda3\\lib\\site-packages\\sklearn\\utils\\validation.py:724: DataConversionWarning: A column-vector y was passed when a 1d array was expected. Please change the shape of y to (n_samples, ), for example using ravel().\n",
      "  y = column_or_1d(y, warn=True)\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "AdaBoostRegressor(base_estimator=None, learning_rate=1.0, loss='linear',\n",
       "                  n_estimators=10, random_state=42)"
      ]
     },
     "execution_count": 92,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "from sklearn.ensemble import AdaBoostRegressor\n",
    "model =AdaBoostRegressor(n_estimators=10, learning_rate=1.0, random_state=42)\n",
    "model.fit(X_train, y_train)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## 모델 성능평가"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 93,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MSE : 0.8038143649977205\n",
      "R_squared : 0.18588858266284825\n"
     ]
    }
   ],
   "source": [
    "y_pred = model.predict(X_test)\n",
    "print (\"MSE :\", metrics.mean_squared_error(y_test, y_pred))\n",
    "print('R_squared :',model.score(X_test, y_test)) "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Feature Importance"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 94,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "<matplotlib.axes._subplots.AxesSubplot at 0x1a1dad04cc0>"
      ]
     },
     "execution_count": 94,
     "metadata": {},
     "output_type": "execute_result"
    },
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    }
   ],
   "source": [
    "feat_importances = pd.Series(model.feature_importances_, index=X.columns)\n",
    "feat_importances.nlargest(10).plot(kind='barh')"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Voting Regression"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 90,
   "metadata": {},
   "outputs": [],
   "source": [
    "#얘는 아직 어떤 모델을 넣어야할지 몰라서 보류..,.\n",
    "#from sklearn.ensemble import VotingRegressor"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# ..."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "1. 행복도를 classify 해서 (10점 기준으로 많이 끊기는 모습 떄문)  regression 이 아닌 classification 으로 문제를 다시 풀 수 있을까? <br>\n",
    "2. 거의 모든 문항에서 q34 가 매우 큰 importance 를 나타내고 있는데, 이를 제거해보고 다시 분석해봐야하나?\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.7.3"
  },
  "toc": {
   "base_numbering": 1,
   "nav_menu": {},
   "number_sections": true,
   "sideBar": true,
   "skip_h1_title": false,
   "title_cell": "Table of Contents",
   "title_sidebar": "Contents",
   "toc_cell": false,
   "toc_position": {},
   "toc_section_display": true,
   "toc_window_display": true
  },
  "varInspector": {
   "cols": {
    "lenName": 16,
    "lenType": 16,
    "lenVar": 40
   },
   "kernels_config": {
    "python": {
     "delete_cmd_postfix": "",
     "delete_cmd_prefix": "del ",
     "library": "var_list.py",
     "varRefreshCmd": "print(var_dic_list())"
    },
    "r": {
     "delete_cmd_postfix": ") ",
     "delete_cmd_prefix": "rm(",
     "library": "var_list.r",
     "varRefreshCmd": "cat(var_dic_list()) "
    }
   },
   "types_to_exclude": [
    "module",
    "function",
    "builtin_function_or_method",
    "instance",
    "_Feature"
   ],
   "window_display": false
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
